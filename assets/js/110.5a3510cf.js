(window.webpackJsonp=window.webpackJsonp||[]).push([[110],{521:function(t,a,e){"use strict";e.r(a);var v=e(20),s=Object(v.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h3",{attrs:{id:"离线检查"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#离线检查"}},[t._v("#")]),t._v(" 离线检查")]),t._v(" "),e("p",[t._v("常规方案是先通过navigator.online属性创建一个初始值，再根据监控window对象的online和offline事件来修改在线状态属性。")]),t._v(" "),e("h3",{attrs:{id:"应用缓存"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#应用缓存"}},[t._v("#")]),t._v(" 应用缓存")]),t._v(" "),e("p",[t._v("H5规定浏览器专门开辟一段缓存区域用来缓存文件。要想使用这个缓存，可以使用一个描述文件，这个文件的MIME类型必须是text/cache-manifest，内容类似于:")]),t._v(" "),e("div",{staticClass:"language-none extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("CACHE MANIFEST\n#Coment\n\nfile.js\nfile.css\n")])])]),e("p",[t._v("然后再html中指定该文件")]),t._v(" "),e("div",{staticClass:"language-none extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('<html manifest="/offline.appcahe">\n')])])]),e("p",[t._v("应用缓存又一个API，核心对象是applicationCache对象，它有一个status属性，取值如下：")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("取值")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("状态")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("描述")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("0")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("无缓存")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("没有与页面相关的缓存")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("1")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("闲置")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("应用缓存未得到更新")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("2")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("检查中")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("正在下载描述文件并检查更新")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("3")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("下载中")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("应用缓存正在下载描述文件中的指定资源")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("4")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("更新完成")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("应用缓存已经更新了资源，而且所有资源都已下载完毕，可以通过swapCache()来使用了")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("5")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("废弃")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("应用缓存的描述文件已经不存在了，因此无法再访问应用缓存")])])])]),t._v(" "),e("p",[t._v("应用缓存还有很多相关的事件：")]),t._v(" "),e("ul",[e("li",[t._v("checking")]),t._v(" "),e("li",[t._v("error")]),t._v(" "),e("li",[t._v("noupdate")]),t._v(" "),e("li",[t._v("downloading")]),t._v(" "),e("li",[t._v("progress")]),t._v(" "),e("li",[t._v("updateready")]),t._v(" "),e("li",[t._v("cached")])]),t._v(" "),e("p",[t._v("以上事件顺序触发，也可以通过调用applicationCache.update()手工触发更新。")]),t._v(" "),e("h3",{attrs:{id:"数据存储"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#数据存储"}},[t._v("#")]),t._v(" 数据存储")]),t._v(" "),e("h4",{attrs:{id:"cookie"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cookie"}},[t._v("#")]),t._v(" Cookie")]),t._v(" "),e("ul",[e("li",[t._v("内容都是值对")]),t._v(" "),e("li",[t._v("内容大小和个数都有限制（根据浏览器不同而不同）")]),t._v(" "),e("li",[t._v("不区分大小写")]),t._v(" "),e("li",[t._v("有域、路径、失效时间、安全标识的限制")]),t._v(" "),e("li",[t._v("js当中的cookie会经过URL编码")]),t._v(" "),e("li",[t._v("js当中直接设置cookie不是覆盖而是追加")]),t._v(" "),e("li",[t._v("js当中没有直接删除cookie的方式，而是通过设置失效时间过期做到的")]),t._v(" "),e("li",[t._v("cookie中不要存放敏感数据，不安全。也不要搞太大，会影响性能")])]),t._v(" "),e("h4",{attrs:{id:"ie用户数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ie用户数据"}},[t._v("#")]),t._v(" IE用户数据")]),t._v(" "),e("p",[t._v("懒得看，都过时了。")]),t._v(" "),e("h4",{attrs:{id:"web存储机制"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#web存储机制"}},[t._v("#")]),t._v(" Web存储机制")]),t._v(" "),e("p",[t._v("Web Storage是一种本地存储规范。")]),t._v(" "),e("p",[t._v("主要有：")]),t._v(" "),e("ul",[e("li",[t._v("Storage")]),t._v(" "),e("li",[t._v("sessionStorage")]),t._v(" "),e("li",[t._v("globalStorage")]),t._v(" "),e("li",[t._v("localStorage")])]),t._v(" "),e("p",[t._v("因为安全问题和实用性等问题，现在常用的就是seesionStorage和localStorage了")]),t._v(" "),e("p",[t._v("主要方法如下：")]),t._v(" "),e("ul",[e("li",[t._v("clear()")]),t._v(" "),e("li",[t._v("getItem(name)")]),t._v(" "),e("li",[t._v("key(index)")]),t._v(" "),e("li",[t._v("remove(name)")]),t._v(" "),e("li",[t._v("setItem(name, value)")])]),t._v(" "),e("p",[t._v("不同浏览器写入磁盘的实际不同，若要强制写入磁盘可以如下操作：")]),t._v(" "),e("div",{staticClass:"language-javascript extra-class"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[t._v("sessionStorage"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("begin")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nsessionStorage"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"jaybai"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nsessionStorage"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("commit")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("Storage事件有如下属性：")]),t._v(" "),e("ul",[e("li",[t._v("domain")]),t._v(" "),e("li",[t._v("key")]),t._v(" "),e("li",[t._v("newValue")]),t._v(" "),e("li",[t._v("oldValue")])]),t._v(" "),e("p",[t._v("各种浏览器对本地存储的限制大小在2.5M-5M不等")]),t._v(" "),e("h4",{attrs:{id:"indexeddb"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#indexeddb"}},[t._v("#")]),t._v(" IndexedDB")]),t._v(" "),e("p",[t._v("全称是indexed Database API，是为了代替废弃的Web SQL Database API。IndexedDB整体设计都是异步的，大多数操作都会以请求的方式进行，几乎每次都需要注册onerror和onsuccess事件处理。")]),t._v(" "),e("p",[t._v("因为浏览器差异所以应该这样获取DB对象实例：")]),t._v(" "),e("div",{staticClass:"language-javascript extra-class"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" indexedDB "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" window"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("indexedDB "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" window"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("msIndexedDB "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" window"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mozIndexedDB "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" window"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("webkitIndexedDB；\n")])])]),e("p",[t._v("indexedDB具有以下特点：")]),t._v(" "),e("ol",[e("li",[t._v("键值对存储")]),t._v(" "),e("li",[t._v("异步")]),t._v(" "),e("li",[t._v("支持事物")]),t._v(" "),e("li",[t._v("同源策略")]),t._v(" "),e("li",[t._v("存储空间大")]),t._v(" "),e("li",[t._v("支持二进制")])]),t._v(" "),e("p",[t._v("主要API抽象出来的对象：")]),t._v(" "),e("ol",[e("li",[t._v("数据库：IDBDatabase 对象")]),t._v(" "),e("li",[t._v("对象仓库：IDBObjectStore 对象")]),t._v(" "),e("li",[t._v("索引： IDBIndex 对象")]),t._v(" "),e("li",[t._v("事务： IDBTransaction 对象")]),t._v(" "),e("li",[t._v("操作请求：IDBRequest 对象")]),t._v(" "),e("li",[t._v("指针： IDBCursor 对象")]),t._v(" "),e("li",[t._v("主键集合：IDBKeyRange 对象")])]),t._v(" "),e("p",[t._v("主要操作跟常规的DB和NOSQL差不多的")])])}),[],!1,null,null,null);a.default=s.exports}}]);