(window.webpackJsonp=window.webpackJsonp||[]).push([[114],{524:function(t,e,s){"use strict";s.r(e);var p=s(20),o=Object(p.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h4",{attrs:{id:"vue3的setup"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue3的setup"}},[t._v("#")]),t._v(" Vue3的setup")]),t._v(" "),s("p",[s("code",[t._v("setup选项是一个接收props和context的函数")]),t._v("是一个新的组件选项，作为Composition-API的入口点，只会被执行一次，用于建立数据与逻辑的连接。")]),t._v(" "),s("ul",[s("li",[t._v("注意点\n"),s("ul",[s("li",[t._v("在执行setup函数时，还没执行created生命周期方法，因此在setup函数中，无法使用data和methods的变量和方法。")]),t._v(" "),s("li",[t._v("不能在setup函数中使用data和methods，在setup中使用this是无法操作的，因为setup 在生命周期beforeCreate和created之间执行，调用发生在 data property、computed property 或 methods 被解析之前，此时组件实例未实例化成功，所以data,methods等东西无法在 setup 中使用this被获取。")])])])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("{\n    setup(props,context){\n        context.attrs;\n        context.slots;\n        context.emit;\n        context.listeners;\n        context.root;\n        context.parent;\n        context.refs;\n        \n        return {};\n    }\n}\n")])])]),s("ul",[s("li",[s("p",[t._v("setup方法的返回值会合并到模板的上下文中参与数据的渲染。")])]),t._v(" "),s("li",[s("p",[t._v("setup函数的参数")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("setup(props,context)函数有两个参数，props:组件接收的参数；context：是一个对象，包含attrs、slots、emit、expose这些属性。")])]),t._v(" "),s("li",[s("p",[t._v("attrs：Attribute，非响应式对象，等同于$attrs")])]),t._v(" "),s("li",[s("p",[t._v("slots：插槽，非响应式对象，等同于$slots")])]),t._v(" "),s("li",[s("p",[t._v("emit：触发事件，方法，等同于$emit，主要用来向父组件通信传参")])]),t._v(" "),s("li",[s("p",[t._v("expose：暴露公共property，函数")])]),t._v(" "),s("li",[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("   setup(props,context) {         //完整写法\n      console.log(props.title)   //获取传递过来的title属性\n      ... \n  } \n  setup(props) {...}            //只用props\n  setup(props, { attrs, slots, emit, expose }) {...} //context参数解构\n  props不能用es6解构,会消除 prop 的响应性，解构需要借助 toRefs 或 toRef。\n")])])])])])])])])}),[],!1,null,null,null);e.default=o.exports}}]);