(window.webpackJsonp=window.webpackJsonp||[]).push([[102],{514:function(t,a,e){"use strict";e.r(a);var s=e(20),n=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h3",{attrs:{id:"基本用法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#基本用法"}},[t._v("#")]),t._v(" 基本用法")]),t._v(" "),e("div",{staticClass:"language-html extra-class"},[e("pre",{pre:!0,attrs:{class:"language-html"}},[e("code",[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("canvas")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("jaybaiDraw"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("width")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("200"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("height")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("200"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("jaybai"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("canvas")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v('\nvar a = document.getElementById("jaybaiDraw");\n\nif(a.getContext){\n\t//取得2D上下文\n\tvar context = a.getContext("2d");\n\t\n\t//取得图像的数据URI\n\tvar imgURI = a.toDataURL("image/png");//默认就是PNG\n\t//显示图像\n\tvar image = document.createElement("img");\n\timage.src = imgURI;\n\tdocument.body.appendChild(image);\n}\n')])])]),e("h3",{attrs:{id:"_2d上下文"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2d上下文"}},[t._v("#")]),t._v(" 2D上下文")]),t._v(" "),e("p",[t._v("填充和描边")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" a "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"jaybaiDraw"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getContext"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" context "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" a"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getContext")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2d"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\n\t"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//这2个对象默认值是#000000，可以使用CSS中指定的任何格式，包括颜色、16进制妈、rgb、rgba、hsl、hsla")]),t._v("\n\tcontext"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("strokeStyle "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"red"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//描边")]),t._v("\n\tcontext"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fillStyleStyle "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"#0000ff"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//填充")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("绘制矩形")]),t._v(" "),e("ul",[e("li",[t._v("fillRect(x, y, width, height)")]),t._v(" "),e("li",[t._v("strokeRect(x, y, width, height)")]),t._v(" "),e("li",[t._v("clearRect(x, y, width, height)")])]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" a "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"jaybaiDraw"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getContext"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" context "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" a"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getContext")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2d"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\tcontext"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("strokeStyle "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"#ff0000"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tcontext"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("strokeRect")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\n\tcontext"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fillStyle "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rgba(0, 0, 255, 0.5)"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tcontext"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("fillRect")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\n\tcontext"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("clearRect")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("40")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("40")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("ul",[e("li",[t._v("lineWidth属性控制描边宽度，可以是任意整数。")]),t._v(" "),e("li",[t._v("lineCap属性控制线条末端的形状是平头、圆头还是方头（butt、round、square）")]),t._v(" "),e("li",[t._v("lineJoin属性控制先挑相交的方式是圆交、斜交还是斜接（round、bevel、miter）")])]),t._v(" "),e("p",[t._v("绘制路径")]),t._v(" "),e("p",[t._v("首先必须调用beginPath()方法，然后再实际调用下列方法：")]),t._v(" "),e("ul",[e("li",[t._v("arc(x, y, radius, startAngle, endAngle, counterclockwise)：以（x,y）为圆心绘制一条弧线，半径为radius，起始和结束（用弧度表示）分别是startAngle、endAngle。counterclockwise为false表示逆时针计算startAngle、endAngle。")]),t._v(" "),e("li",[t._v("arcTo(x1, y1, x2, y2, radius)：从上一点开始绘制一条弧线，到(x2,y2)为止，并且以给定的半径radius穿过（x1,y1）")]),t._v(" "),e("li",[t._v("bezierCurveTo(c1x, c1y, c2x, c2y, x, y)：从上一个点开始绘制一条曲线，到(x,y)为止，并且以（c1x,c1y）和（c2x,c2y）为控制点")]),t._v(" "),e("li",[t._v("lineTo(x, y)：从上一点开始绘制一条直线到（x,y）为止")]),t._v(" "),e("li",[t._v("moveTo(x, y)：讲绘图游标移动到(x,y)，不画线")]),t._v(" "),e("li",[t._v("quadraticCurveTo(cx, cy, x, y)：从上一点开始绘制一条二次曲线，到(x,y)为止，并且以()")]),t._v(" "),e("li",[t._v("rece(x, y , width, height)")])]),t._v(" "),e("p",[t._v("创建路径后有几种选择：")]),t._v(" "),e("ol",[e("li",[t._v("closePath()：绘制一条连接到路径起点的线条")]),t._v(" "),e("li",[t._v("fill()：用fillStyle填充它")]),t._v(" "),e("li",[t._v("stroke()：用strokeStyle填充它")]),t._v(" "),e("li",[t._v("clip()：在路径是那个创建一个剪切区域")])]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//路径被关闭前确认画布上的某一个点是否位于路径上")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("context"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("isPonitInPath")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("Point")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" is "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" the path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("绘制文本")]),t._v(" "),e("ul",[e("li",[t._v("fillText(text, x, y, maxPixelWidth)")]),t._v(" "),e("li",[t._v("strokeText(text, x, y, maxPixelWidth)")])]),t._v(" "),e("p",[t._v("这2个方法都以一下3个属性为基础：")]),t._v(" "),e("ol",[e("li",[t._v("font：样式、大小及字体，例如“10px Arial”")]),t._v(" "),e("li",[t._v("textAlign：对齐方式，值有start、end、left、right、center")]),t._v(" "),e("li",[t._v("textBaseline：本文基线，值有top、hanging、middle、alphabetic、ideographic、bottom")])]),t._v(" "),e("p",[t._v("变换")]),t._v(" "),e("ul",[e("li",[t._v("rotate(angle)：围绕原点旋转图像angle弧度")]),t._v(" "),e("li",[t._v("scale(a, b)：缩放图像，在xy方向上分别乘以a、b。默认ab都是1.0")]),t._v(" "),e("li",[t._v("translate(x, y)：将坐标原点移动到(x,y)")]),t._v(" "),e("li",[t._v("transform(m11, m12, m21, m22, dx, dy)：直接修改改变矩阵，直接乘以矩阵")]),t._v(" "),e("li",[t._v("setTransform(m11, m12, m21, m22, dx, dy)：先重置矩阵，在调用transform")])]),t._v(" "),e("p",[t._v("矩阵是这样的的")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("m11")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("m12")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("dx")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("strong",[t._v("m21")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("strong",[t._v("m22")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("strong",[t._v("dy")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("strong",[t._v("0")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("strong",[t._v("0")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("strong",[t._v("1")])])])])]),t._v(" "),e("p",[t._v("绘制图像")]),t._v(" "),e("ul",[e("li",[t._v("drawImage()")])]),t._v(" "),e("p",[t._v("有3种调用方式")]),t._v(" "),e("ol",[e("li",[t._v("drawImage(image, x, y)")]),t._v(" "),e("li",[t._v("drawImage(image, x, y, width, height)")]),t._v(" "),e("li",[t._v("drawImage(image, src_x, y, src_width, src_height, src_target_x, target_y, target_width, target_height)")])]),t._v(" "),e("p",[t._v("阴影")]),t._v(" "),e("ul",[e("li",[t._v("shadowColor，默认黑色")]),t._v(" "),e("li",[t._v("shadowOffsetX，默认0")]),t._v(" "),e("li",[t._v("shadowOffsetY，默认0")]),t._v(" "),e("li",[t._v("shadowBlur，默认0不模糊")])]),t._v(" "),e("p",[t._v("渐变")]),t._v(" "),e("p",[t._v("CancasGradient实例表示渐变。")]),t._v(" "),e("ul",[e("li",[t._v("createLinearGradient(start_x, start_y, end_x, end_y)：创建线性渐变")]),t._v(" "),e("li",[t._v("addColorStop(pos, color)：指定色标位置和颜色，0=开始，1=结束")])]),t._v(" "),e("p",[t._v("把fillStyle或strokeStyle设置为这个对象，就可以渐变的填充或者描边了。")]),t._v(" "),e("blockquote",[e("p",[t._v("一般为了渐变更充分，设置的位置要等于你需要渐变的区域或者元素的坐标大小")])]),t._v(" "),e("p",[t._v("模式")]),t._v(" "),e("p",[t._v("模式就是重复的图像。")]),t._v(" "),e("ul",[e("li",[t._v("createPattern(image, patternStr)：patternStr跟CSS的background-repeat属性值相同，repeat、repeat-x、repeat-y、no-repeat")])]),t._v(" "),e("p",[t._v("使用图像数据")]),t._v(" "),e("ul",[e("li",[t._v("getImageData(x, y, width, heigth)")])]),t._v(" "),e("p",[t._v("取得一个ImageData对象，都有width,heigth和data对象，data属性是一个数组，保存着图像每一个像素的数据。每一个像素用4个元素保存，分别表示红、绿、蓝和透明度。")]),t._v(" "),e("p",[t._v("合成")]),t._v(" "),e("ul",[e("li",[t._v("globalAlpha，全局透明度。介于0-1之间包括0、1，绘制的透明度，默认0")]),t._v(" "),e("li",[t._v("globalCompositionOperation，后绘制的图像怎么与先绘制的图像结合。")])]),t._v(" "),e("p",[t._v("globalCompositionOperation的取值可能是：")]),t._v(" "),e("ul",[e("li",[t._v("source-over：默认值，后绘的再上方")]),t._v(" "),e("li",[t._v("source-in：后绘制的与先绘制的重叠部分可见，两者其他完全透明")]),t._v(" "),e("li",[t._v("source-out：后绘制的与先绘制的不重叠部分可见，先绘制的完全透明")]),t._v(" "),e("li",[t._v("source-atop：后绘制的与先绘制的重叠部分可见，先绘制的图形不受影响")]),t._v(" "),e("li",[t._v("destination-over：后绘的在下方")]),t._v(" "),e("li",[t._v("destination-in：后绘的在下方，其他同理")]),t._v(" "),e("li",[t._v("destination-out：后绘的在下方，其他同理")]),t._v(" "),e("li",[t._v("destination-atop：后绘的在下方，其他同理")]),t._v(" "),e("li",[t._v("lighter：后绘制的与先绘制的重叠部分的值相加，该部分高亮")]),t._v(" "),e("li",[t._v("copy：后绘制的代替先绘制的重叠部分")]),t._v(" "),e("li",[t._v("xor：后绘制的部分和先绘制的部分进行异或操作")])]),t._v(" "),e("h3",{attrs:{id:"webgl"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#webgl"}},[t._v("#")]),t._v(" WebGL")]),t._v(" "),e("p",[t._v("WebGL是针对Canvas的3D上下文。")]),t._v(" "),e("p",[t._v("类型化数组")]),t._v(" "),e("p",[t._v("为了解决JavaScript数值精度问题，WebGL引入了一个概念叫做类型化数组（typed arrays）。核心是一个名为ArrayBuffer的类型。只分配一定的字节数量，不指定类型。")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" buffer "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ArrayBuffer")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" bytes "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" buffer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("byteLength"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("使用ArrayBuffer的一种特别的方式就是用它来创建数组缓冲器视图。最常见的就是DataView，通过它可以选择ArrayBuffer中的一小段字节。实例化后，DataView对象有2个属性：")]),t._v(" "),e("ol",[e("li",[t._v("byteOffset")]),t._v(" "),e("li",[t._v("byteLength")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("数据类型")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("getter")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("setter")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("有符号8位整数")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("getInt8(byteOffset)")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("setInt8(byteOffset, value)")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("无符号8位整数")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("getUint8(byteOffset)")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("setUint8(byteOffset, value)")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("有符号16位整数")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("getInt16(byteOffset, littleEndian)")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("setInt16(byteOffset, value, littleEndian)")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("无符号16位整数")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("getUint16(byteOffset, littleEndian)")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("setUint16(byteOffset, value, littleEndian)")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("有符号32位整数")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("getInt32(byteOffset, littleEndian)")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("setInt32(byteOffset, value, littleEndian)")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("无符号32位整数")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("getUint32(byteOffset, littleEndian)")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("setUint32(byteOffset, value, littleEndian)")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("32位浮点数")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("getFloat32(byteOffset, littleEndian)")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("setFloat32(byteOffset, value, littleEndian)")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("64位浮点数")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("getFloat64(byteOffset, littleEndian)")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("setFloat64(byteOffset, value, littleEndian)")])])])]),t._v(" "),e("blockquote",[e("p",[t._v("无符号8位整数要用1B，32位浮点数则要用4B，需要自己管理这些细节。")])]),t._v(" "),e("p",[t._v("类型化数组继承自DataView")]),t._v(" "),e("ul",[e("li",[t._v("Int8Array")]),t._v(" "),e("li",[t._v("Uint8Array")]),t._v(" "),e("li",[t._v("Int16Array")]),t._v(" "),e("li",[t._v("Uint16Array")]),t._v(" "),e("li",[t._v("Int32Array")]),t._v(" "),e("li",[t._v("Uint32Array")]),t._v(" "),e("li",[t._v("Float32Array")]),t._v(" "),e("li",[t._v("Float64Array")])]),t._v(" "),e("p",[t._v("每个视图构造函数都有一个名为BYTES_PER_ELEMENT的属性，表示类型化数组的元素需要多少个字节")]),t._v(" "),e("p",[t._v("WebGL上下文")]),t._v(" "),e("p",[t._v("WebGL的名字叫做“experimental-webgl”规范后会变成“webgl”")]),t._v(" "),e("p",[t._v("getContent()的第二个参数是一个对象，可以包含如下属性")]),t._v(" "),e("ul",[e("li",[t._v("alpha，true表示创建一个Alpha通道，默认是true")]),t._v(" "),e("li",[t._v("depth，true表示使用16位色深，默认true")]),t._v(" "),e("li",[t._v("stencil，true表示使用8位模板缓冲区，默认false")]),t._v(" "),e("li",[t._v("antialias，true表示使用默认机制抗锯齿，默认值为true")]),t._v(" "),e("li",[t._v("premultipliedAlpha，true表示绘图缓冲区有预乘Alpha值，默认为true")]),t._v(" "),e("li",[t._v("preserveDrawingBuffer，true表示绘图完成保存绘图缓冲区，默认false。开启会影响性能，有必要才开")])]),t._v(" "),e("ol",[e("li",[t._v("常量以GL_前缀开头")]),t._v(" "),e("li",[t._v("方法名的后缀会包含参数个数和类型（f=浮点，i=整数）")]),t._v(" "),e("li",[t._v("操作WebGL之前用clearColor()指定颜色清除canvas")]),t._v(" "),e("li",[t._v("可以用veiwport()调整视口")]),t._v(" "),e("li",[t._v("可以用createBuffer()然后bindBuffer()绑定到WebGL上下文，然后就可以用数据填充缓冲区了")]),t._v(" "),e("li",[t._v("getError()可以拿到错误")]),t._v(" "),e("li",[t._v("有定点着色器和片段着色器")]),t._v(" "),e("li",[t._v("CLSL是一种类C语言，专门用于编写OpenGL着色器")]),t._v(" "),e("li",[t._v("createShader()方法传入要创建的着色器类型，用compileShader()编译")]),t._v(" "),e("li",[t._v("通过getUniformLocation()获得Uniform变量在内存中的位置")]),t._v(" "),e("li",[t._v("getShaderParameter()取得着色器的编译状态")]),t._v(" "),e("li",[t._v("drawArrays()和drawElements()绘图，前者用于数据缓冲区，后者用于元素缓冲区")]),t._v(" "),e("li",[t._v("createTexture()创建纹理，必须在load事件以后才能设置纹理")]),t._v(" "),e("li",[t._v("readPixels()取得像素值")])])])}),[],!1,null,null,null);a.default=n.exports}}]);